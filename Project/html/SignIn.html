<!DOCTYPE html>
<!--suppress ALL -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="../resources/css/signIn/SignIn.css">
    <link rel="icon" type="images/x-ico" href="../resources/image/logo.ico"/>
    <title>欢迎使用京沪铁路查询网站</title>
    <script>
        window.console = window.console || function (t) {
        };
        if (document.location.search.match(/type=embed/gi)) {
            window.parent.postMessage("resize", "*");
        }

    </script>
</head>

<body>
<div class="figure">
    <!-- the windmill -->
    <div id="windmills">
        <div class="wmd">
            <div class="blades">
                <div class="blade2"></div>
                <div class="blade1"></div>
                <div class="vane1"></div>
                <div class="blade3"></div>
                <div class="blade4"></div>
                <div class="vane2"></div>
            </div>
            <div class="base">
                <div class="bottom_base">
                </div>
            </div>

            <div class="wmd">
                <div class="blades">
                    <div class="blade2"></div>
                    <div class="blade1"></div>
                    <div class="vane1"></div>
                    <div class="blade3"></div>
                    <div class="blade4"></div>
                    <div class="vane2"></div>
                </div>
                <div class="base" id="base1">
                    <div class="bottom_base">
                    </div>
                </div>

                <div class="wmd">
                    <div class="blades">
                        <div class="blade2"></div>
                        <div class="blade1"></div>
                        <div class="vane1"></div>
                        <div class="blade3"></div>
                        <div class="blade4"></div>
                        <div class="vane2"></div>
                    </div>
                    <div class="base">
                        <div class="bottom_base">
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- train -->
    <div class="mytrain">
        <div class="loader">
            <div class="train"></div>
            <div class="track">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </div>
</div>

<div id="logwindow">
    <h1>欢迎使用京沪铁路查询网站</h1>

    <div class="container">
        <div class="navigation">
            <ol>
                <li><a href="#" data-ref="username">Username</a></li>
                <li><a href="#" data-ref="viewpswd">Password</a></li>
                <li><a href="#" data-ref="viewcfgpswd">Configure</a></li>
                <li><a href="#" data-ref="email">Email</a></li>
                <li><a href="#" data-ref="phone">Phone</a></li>
            </ol>
        </div>
        <form id="sign-form" class="sign-form">
            <ol class="questions">
                <li>
                    <span><label for="username" style="font-family: MyFont;font-size: 36px; font-weight: bolder;">嗨, 输入你的用户名吧</label></span>
                    <input class="active" id="username" name="name" type="text" placeholder="输入你的用户名"
                           autofocus style="font-family: MyFont;font-size: 24px"/>
                </li>
                <li>
                    <span><label for="password" style="font-family: MyFont;font-size: 36px; font-weight: bolder;">设置一个你的密码吧</label></span>
                    <input id="viewpswd" name="password" type="text" placeholder="设置一个你的密码吧"/>
                    <input id="password" name="password" type="password" placeholder="确保你不会忘记哦"
                           autofocus style="font-family: MyFont;font-size: 24px"/>
                    <span id="show-pwd" class="view"></span>
                </li>
                <li>
                    <span><label for="againpassword"
                                 style="font-family: MyFont;font-size: 36px; font-weight: bolder;">确认一下你的密码吧</label></span>
                    <input id="viewcfgpswd" name="againpassword" type="text" placeholder="确认一下你的密码吧"/>
                    <input id="againpassword" name="againpassword" type="password" placeholder="保证两次输入的密码相同哦"
                           autofocus style="font-family: MyFont;font-size: 24px"/>
                    <span id="show-pwd—again" class="view"></span>
                </li>
                <li>
                    <span><label for="email"
                                 style="font-family: MyFont;font-size: 36px; font-weight: bolder;">请绑定你的邮箱</label></span>
                    <input id="email" name="email" type="text" placeholder="Email" autofocus
                           style="font-family: MyFont;font-size: 24px"/>
                </li>
                <li>
                    <span><label for="phone" style="font-family: MyFont;font-size: 36px; font-weight: bolder;">还需要告诉我们你的联系方式</label></span>
                    <select name="countryCode" class="country" style="font-family: MyFont;font-size: 24px">
                        <option data-countryCode="CN" value="86">(+86) 中国</option>
                        <option data-countryCode="GB" value="44">(+44) 英国</option>
                        <option data-countryCode="US" value="1">(+1) 美国</option>
                        <optgroup label="Other countries">
                            <option data-countryCode="DZ" value="213"> (+213)Algeria</option>
                            <option data-countryCode="AD" value="376"> (+376) Andorra</option>
                            <option data-countryCode="AO" value="244">(+244) Angola</option>
                            <option data-countryCode="AI" value="1264"> (+1264) Anguilla</option>
                            <option data-countryCode="AG" value="1268">(+1268) Antigua &amp; Barbuda</option>
                            <option data-countryCode="AR" value="54">(+54) Argentina</option>
                            <option data-countryCode="AM" value="374"> (+374) Armenia</option>
                            <option data-countryCode="AW" value="297">(+297) Aruba</option>
                            <option data-countryCode="AU" value="61"> (+61) Australia</option>
                            <option data-countryCode="AT" value="43">(+43) Austria</option>
                            <option data-countryCode="AZ" value="994"> (+994) Azerbaijan</option>
                            <option data-countryCode="BS" value="1242">(+1242)Bahamas</option>
                        </optgroup>
                    </select>
                    <input id="phone" name="phone" type="text" autofocus/>
                </li>
                <li><p style="margin-top: 45px;font-size: 32pt;float:right">
                    <a href="#" style="color:white;text-decoration:none;font-family: MyFont;font-size: 36px"
                       id="signup">注册</a></p></li>
            </ol>
            <div id="next-page" alt="Kiwi standing on oval"></div>
            <div class="error-message"></div>
        </form>
        <h1 id="wf" style="opacity:0;width: 600px; margin-top:1.1em;display:none; margin-bottom:1em">感谢使用</h1>
        <script src="https://static.codepen.io/assets/common/stopExecutionOnTimeout-de7e2ef6bfefd24b79a3f68b414b87b8db5b08439cac3f1012092b2290c719cd.js"></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js'></script>
        <script id="rendered-js">
            var counter = 1;
            $(document).ready(function () {
                var erroEle = $('.error-message'),
                    focusInput = $('.questions').find('.active');

                $('.navigation a').click(function () {
                    nextMaster('navi');

                    var thisInput = $('#' + $(this).attr('data-ref'));
                    $('.active').removeClass('active');
                    thisInput.focus().addClass('active');
                    thisInput.closest('li').animate({
                            marginTop: '0px',
                            opacity: 1
                        },
                        200);
                    thisInput.closest('li').prevAll('li').animate({
                            marginTop: '-150px',
                            opacity: 0
                        },
                        200);
                    //                     .AddClass('done');

                    thisInput.closest('li').nextAll('li').animate({
                            marginTop: '150px',
                            opacity: 0
                        },
                        200);
                    //                    .RemoveClass('done');
                    errorMessage(erroEle, '', 'hidden', 0);

                });

                if (focusInput.val() != '') {
                    $('#next-page').css('opacity', 1);
                }

                $(document).keypress(function (event) {
                    if (event.which == 13) {
                        nextMaster('keypress');
                        event.preventDefault();
                    }

                    $('#next-page').click(function () {
                        var focusInput = $('.questions').find('.active');
                        nextMaster('nextpage');

                    });

                });

                function nextMaster(type) {
                    var focusInput = $('.questions').find('.active');
                    if (focusInput.val() != '') {
                        if ((focusInput.attr('name') == 'username') && focusInput.val().length < 2) {
                            errorMessage(erroEle, "似乎作为" + focusInput.attr('name') + "有一点点短", 'visible', 1);
                        } else if (focusInput.attr('name') == 'email' && !validateEmail(focusInput.val())) {
                            errorMessage(erroEle, "似乎并不是一个合法的" + focusInput.attr('name'), 'visible', 1);
                        } else if (focusInput.attr('name') == 'phone' && !validatePhone(focusInput.val())) {
                            errorMessage(erroEle, "似乎不是一个合法的" + focusInput.attr('name'), 'visible', 1);
                        } else {
                            if (type != 'navi') showLi(focusInput);
                            $('#next-page').css('opacity', 0);
                            errorMessage(erroEle, '', 'hidden', 0);
                        }
                    } else if (type == 'keypress') {
                        errorMessage(erroEle, 'please enter your ' + focusInput.attr('name'), 'visible', 1);
                    }

                }

                $("input[type='text']").keyup(function (event) {
                    var focusInput = $(this);
                    if (focusInput.val().length > 1) {
                        if (focusInput.attr('name') == 'email' && !validateEmail(focusInput.val()) ||
                            focusInput.attr('name') == 'phone' && !validatePhone(focusInput.val())) {
                            $('#next-page').css('opacity', 0);
                        } else {
                            $('#next-page').css('opacity', 1);
                        }

                    } else {
                        $('#next-page').css('opacity', 0);
                    }
                });

                $("#password").keyup(function (event) {
                    var focusInput = $(this);
                    $("#viewpswd").val(focusInput.val());
                    if (focusInput.val().length > 1) {
                        $('#next-page').css('opacity', 1);
                    }
                });

                $("#againpassword").keyup(function (event) {
                    var focusInput = $(this);
                    $("#viewcfgpswd").val(focusInput.val());
                    if (focusInput.val().length > 1) {
                        $('#next-page').css('opacity', 1);
                    }
                });


                $('#signup').click(function () {
                    $('.navigation').fadeOut(400).css({
                        'display': 'none'
                    });

                    $('#sign-form').fadeOut(400).css({
                        'display': 'none'
                    });

                    $(this).fadeOut(400).css({
                        'display': 'none'
                    });

                    $('#wf').animate({
                            opacity: 1,
                            marginTop: '1em'
                        },
                        500).css({
                        'display': 'block'
                    });

                    window.location.href="Loading.html";

                });

                $('#show-pwd').mousedown(function () {
                    $(this).toggleClass('view').toggleClass('hide');
                    $('#password').css('opacity', 0);
                    $('#viewpswd').css('opacity', 1);
                }).mouseup(function () {
                    $(this).toggleClass('view').toggleClass('hide');
                    $('#password').css('opacity', 1);
                    $('#viewpswd').css('opacity', 0);
                });

                $('#show-pwd-again').mousedown(function () {
                    $(this).toggleClass('view').toggleClass('hide');
                    $('#againpassword').css('opacity', 0);
                    $('#viewcfgpswd').css('opacity', 1);
                }).mouseup(function () {
                    $(this).toggleClass('view').toggleClass('hide');
                    $('#againpassword').css('opacity', 1);
                    $('#viewcfgpswd').css('opacity', 0);
                });

            });

            function showLi(focusInput) {

                focusInput.closest('li').animate({
                        marginTop: '-150px',
                        opacity: 0
                    },
                    200);

                console.log(focusInput.closest('li'));

                if (focusInput.attr('id') == 'viewpswd') {
                    $("[data-ref='" + focusInput.attr('id') + "']").addClass('done').html('password');
                    //                    .html(Array(focusInput.val().length+1).join("*"));
                } else if (focusInput.attr('id') == 'viewcfgpswd') {
                    $("[data-ref='" + focusInput.attr('id') + "']").addClass('done').html('configure');
                    //
                } else {
                    $("[data-ref='" + focusInput.attr('id') + "']").addClass('done').html(focusInput.val());
                }

                focusInput.removeClass('active');
                counter++;

                var nextli = focusInput.closest('li').next('li');

                nextli.animate({
                        marginTop: '0px',
                        opacity: 1
                    },
                    200);

                nextli.find('input').focus().addClass('active');

            }

            function errorMessage(textmeg, appendString, visib, opaci) {
                textmeg.css({
                    visibility: visib
                }).animate({
                    opacity: opaci
                }).html(appendString);
            }

            function validateEmail(email) {
                var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                return re.test(email);
            }

            function validatePhone(phone) {
                var re = /\(?([0-9]{3})\)?([ .-]?)([0-9]{3})\2([0-9]{4})/;
                return re.test(phone);
            }
        </script>
    </div>

</div>
</body>
</html>